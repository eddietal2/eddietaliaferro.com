!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(self.webpackChunkeddietaliaferro_com=self.webpackChunkeddietaliaferro_com||[]).push([[4174],{4174:function(r,n,o){o.r(n),o.d(n,{RegisterPageModule:function(){return A}});var i=o(8583),s=o(665),a=o(7823),u=o(1382),c=o(4762),l=o(8307),d=o(5304),g=o(4575),p=o(8720),m=o(1228),f=o(1311);function h(e,t){1&e&&(p.TgZ(0,"ion-item",10),p._UZ(1,"img",24),p.qZA())}function b(e,t){if(1&e&&(p.TgZ(0,"ion-item",10),p._UZ(1,"img",25),p.qZA()),2&e){var r=p.oxw();p.xp6(1),p.s9C("src",r.pictureDataURL,p.LSH)}}function v(e,t){if(1&e&&(p.TgZ(0,"div",27),p._uU(1),p.qZA()),2&e){var r=p.oxw().$implicit;p.xp6(1),p.hij(" ",r.message," ")}}function w(e,t){if(1&e&&(p.ynx(0),p.YNc(1,v,2,1,"div",26),p.BQk()),2&e){var r=t.$implicit,n=p.oxw();p.xp6(1),p.Q6J("ngIf",n.registerForm.get("email").hasError(r.type)&&(n.registerForm.get("email").dirty||n.registerForm.get("email").touched))}}function x(e,t){if(1&e&&(p.TgZ(0,"div",27),p._uU(1),p.qZA()),2&e){var r=p.oxw().$implicit;p.xp6(1),p.hij(" ",r.message," ")}}function y(e,t){if(1&e&&(p.ynx(0),p.YNc(1,x,2,1,"div",26),p.BQk()),2&e){var r=p.oxw();p.xp6(1),p.Q6J("ngIf",r.registerForm.get("password").hasError("pattern")&&(r.registerForm.get("password").dirty||r.registerForm.get("password").touched))}}var Z,C=[{path:"",component:(Z=function(){function r(t,n,o,i,s,a){e(this,r),this.router=t,this.auth=n,this.alertController=o,this.modalController=i,this.pictureService=s,this.formBuilder=a,this.passwordShow=!1,this.validCode=!1,this.code="",this.validationMessasges={email:[{type:"email",message:"Please enter a valid email address"}],password:[{type:"password",message:"Please enter a valid password that is at least 6 characters long"}]}}var n,o,i;return n=r,(o=[{key:"ngOnInit",value:function(){this.registerForm=this.formBuilder.group({firstName:["John",[s.kI.required]],lastName:["Doe",[s.kI.required]],email:["networkbiz92@gmail.com",[s.kI.required,s.kI.email]],password:["123456",[s.kI.required]]}),console.log(this.registerForm.valid)}},{key:"back",value:function(){if(this.auth.blogID)return this.router.navigate(["login",this.auth.blogID]);this.router.navigate(["login",""])}},{key:"register",value:function(){var e=this;console.clear(),console.log("Registering User Data: "),console.log(this.registerForm.value),this.getPictureS3URL();var t=this.registerForm.value.firstName+" "+this.registerForm.value.lastName,r=this.registerForm.value.email,n=this.registerForm.value.picture,o=this.registerForm.value.password;this.emailCheckSub=this.auth.checkEmail(r).subscribe(function(i){return console.log(i),i.isEmail?void e.presentAlert("Use different Email","There is a user that already exists with this email.\n"+r):e.codeAlert("6 Digit Code","An email has been sent to the email you provided with a 6 digit code. Please Enter the correct code to finish signing up.",t,n,r,o)})}},{key:"passwordShowToggle",value:function(){var e=document.getElementById("password-input");return this.passwordShow?(e.setAttribute("type","password"),console.log(e),void(this.passwordShow=!1)):(e.setAttribute("type","text"),console.log(e),void(this.passwordShow=!0))}},{key:"inputFocus",value:function(e,t){console.clear(),console.log(e),console.log(t);var r=document.getElementById("first-name-input"),n=document.getElementById("last-name-input"),o=document.getElementById("email-input"),i=document.getElementById("password-input");"firstName"===t&&(r.style.border="2px solid #3cf63c"),"lastName"===t&&(n.style.border="2px solid #3cf63c"),"email"===t&&(o.style.border="2px solid #3cf63c"),"password"===t&&(i.style.border="2px solid #3cf63c")}},{key:"inputBlur",value:function(e){console.clear(),console.log(e);var t=document.getElementById("first-name-input"),r=document.getElementById("last-name-input"),n=document.getElementById("email-input"),o=document.getElementById("password-input");t.style.border="2px solid white",r.style.border="2px solid white",n.style.border="2px solid white",o.style.border="2px solid white"}},{key:"getPictureFile",value:function(e){var t=this,r=document.getElementById("picture-input"),n=new FileReader;r&&n.readAsDataURL(e.target.files[0]),n.addEventListener("load",function(){t.pictureDataURL=n.result,console.log(t.pictureDataURL)},!1)}},{key:"getPictureS3URL",value:function(){var e=this;if(this.pictureDataURL){var t=new FormData,r=new File([this.dataURLtoBlob(this.pictureDataURL)],"user-profile-picture.png");t.append("user-profile-picture",r),this.pictureService.userProfilePictureUpload(t).subscribe(function(t){e.registerForm.value.picture=t.objectUrl})}else this.registerForm.value.picture="https://eddietaliaferro-com.s3.us-east-2.amazonaws.com/picture/001001635260303625_picture.png"}},{key:"dataURLtoBlob",value:function(e){if(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),o=n.length,i=new Uint8Array(o);o--;)i[o]=n.charCodeAt(o);return new Blob([i],{type:r})}this.registerForm.value.picture="https://eddietaliaferro-com.s3.us-east-2.amazonaws.com/picture/001001635260303625_picture.png"}},{key:"noPictureAlert",value:function(){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alertController.create({cssClass:"danger-alert",message:"Please upload a profile picture!",buttons:[{text:"OK"}]});case 2:return e.next=4,e.sent.present();case 4:case"end":return e.stop()}},e,this)}))}},{key:"presentAlert",value:function(e,t){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.alertController.create({cssClass:"danger-alert",header:e,message:t,buttons:[{text:"OK"}]});case 2:return r.next=4,r.sent.present();case 4:case"end":return r.stop()}},r,this)}))}},{key:"codeAlert",value:function(e,t,r,n,o,i){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function s(){var a=this;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.alertController.create({cssClass:"danger-alert",header:e,message:t,buttons:[{text:"Submit",handler:function(){console.log("Confirm Okay"),a.validCode&&(new Promise(function(e,t){e(a.emailCheckSub.unsubscribe()),t(console.log("emialCheckSubPromise Rejected"))}),a.auth.register(r,n,o,i).pipe((0,l.b)(function(e){e||console.log("There was no response.")}),(0,d.K)(function(e){throw console.error(e),"The user already exists"===e.error.msg?a.presentAlert("Use different Email","There is a user that already exists with this email."):a.presentAlert("Server Error","There was an error with the server. Please come back later."),new Error(e)})).subscribe(function(e){return console.log(e),a.presentSuccessModal()}))}},{text:"Send New Code",handler:function(){console.log("Confirm Okay")}},{text:"Cancel",role:"cancel"}],inputs:[{name:"code",id:"code",type:"text",placeholder:"Enter 6 Digit code"}]});case 2:return s.next=4,s.sent.present().then(function(e){console.clear();var t,r=document.createElement("ion-input");r.setAttribute("id","ion-code"),r.setAttribute("type","text"),r.setAttribute("maxlength","6"),r.setAttribute("placeholder","Enter 6 Digit Code: "),console.log(r);var n,o=document.getElementById("code");(n=o).parentNode.insertBefore(r,n.nextSibling),o.remove(),a.generateCode(6),a.codeSub=a.auth.sendRegistrationCode(a.registerForm.value.email,a.code).subscribe(function(e){console.log("Code Successfully sent"),r.addEventListener("ionChange",function(e){if(t=e.detail.value,console.log(t),t===a.code)return console.log("Congrats"),a.validCode=!0;t!=a.code&&console.log("Wrong Code")})})});case 4:case"end":return s.stop()}},s,this)}))}},{key:"generateCode",value:function(e){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r="",o=(n="0123456789").length,i=0;i<e;i++)r+=n.charAt(Math.floor(Math.random()*o));return t.abrupt("return",(console.log("Generated Code: "+r),this.code=r));case 4:case"end":return t.stop()}},t,this)}))}},{key:"presentSuccessModal",value:function(){return(0,c.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:g.l,componentProps:{firstName:this.registerForm.value.firstName,email:this.registerForm.value.email,picture:this.registerForm.value.picture,page:"register"},cssClass:"my-custom-class"});case 2:return t=e.sent,e.next=5,t.present().catch(function(e){throw Error(e)}).then(function(){r.router.navigate(["/login",r.auth.blogID]),setTimeout(function(){t.dismiss()},5e3)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){console.log("Register Page destroyed"),this.emailCheckSub.unsubscribe()}}])&&t(n.prototype,o),i&&t(n,i),r}(),Z.\u0275fac=function(e){return new(e||Z)(p.Y36(u.F0),p.Y36(m.e),p.Y36(a.Br),p.Y36(a.IN),p.Y36(f.G),p.Y36(s.qu))},Z.\u0275cmp=p.Xpm({type:Z,selectors:[["app-register"]],hostBindings:function(e,t){1&e&&p.NdJ("unloaded",function(){return t.ngOnDestroy()})},decls:41,vars:6,consts:[[1,"ion-justify-content-center",2,"margin-bottom","20px"],["size-xs","11","size-sm","9","size-md","8","size-lg","6","size-xl","5",1,"ion-text-center",2,"margin-top","5em"],[1,"grey-button",2,"width","100px",3,"click"],[1,"page-header",2,"margin-top","2em"],[1,"alert"],[2,"font-size","1em"],[1,"ion-justify-content-center",2,"margin-bottom","80px"],["size-xs","12","size-sm","9","size-md","8","size-lg","6","size-xl","5"],[3,"formGroup","ngSubmit"],["lines","none",4,"ngIf"],["lines","none"],["for","user-profile-picture"],["id","picture-input","name","user-profile-picture","type","file","placeholder","Picture",3,"change"],["id","first-name-input","formControlName","firstName","type","text","placeholder","First Name",3,"ionFocus","ionBlur"],["id","last-name-input","formControlName","lastName","type","text","placeholder","Last Name",3,"ionFocus","ionBlur"],["id","email-input","formControlName","email","type","email","placeholder","Email",3,"ionFocus","ionBlur"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["id","password-input","formControlName","password","type","password","placeholder","Password","minlength","6",3,"ionFocus","ionBlur"],["id","show-icon-button",3,"click"],["slot","end","name","eye"],[1,"ion-text-center"],["type","submit",1,"ion-hide-lg-down","green-button"],[3,"ngClass","click"],["id","default-profile-picture","height","120px","src","../../../assets/Default-Profile-Picture.svg","alt","Default Profile Picture"],["id","default-profile-picture","height","120px","alt","Uploaded Profile Picture",3,"src"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(e,t){1&e&&(p.TgZ(0,"ion-content"),p.TgZ(1,"ion-grid"),p.TgZ(2,"ion-row",0),p.TgZ(3,"ion-col",1),p.TgZ(4,"ion-button",2),p.NdJ("click",function(){return t.back()}),p._uU(5," Back "),p.qZA(),p.TgZ(6,"h1",3),p._uU(7,"Register"),p.qZA(),p.TgZ(8,"div",4),p.TgZ(9,"p",5),p._uU(10,"You will need to fill out the entire form to be able to register. You do not need a profile picture."),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(11,"ion-row",6),p.TgZ(12,"ion-col",7),p.TgZ(13,"form",8),p.NdJ("ngSubmit",function(){return t.register()}),p.YNc(14,h,2,0,"ion-item",9),p.YNc(15,b,2,1,"ion-item",9),p.TgZ(16,"ion-item",10),p.TgZ(17,"label",11),p._uU(18,"Profile Picture"),p.qZA(),p.TgZ(19,"input",12),p.NdJ("change",function(e){return t.getPictureFile(e)}),p.qZA(),p.qZA(),p.TgZ(20,"ion-item",10),p.TgZ(21,"ion-input",13),p.NdJ("ionFocus",function(e){return t.inputFocus(e,"firstName")})("ionBlur",function(e){return t.inputBlur(e)}),p.qZA(),p.qZA(),p.TgZ(22,"ion-item",10),p.TgZ(23,"ion-input",14),p.NdJ("ionFocus",function(e){return t.inputFocus(e,"lastName")})("ionBlur",function(e){return t.inputBlur(e)}),p.qZA(),p.qZA(),p.TgZ(24,"ion-item",10),p.TgZ(25,"ion-input",15),p.NdJ("ionFocus",function(e){return t.inputFocus(e,"email")})("ionBlur",function(e){return t.inputBlur(e)}),p.qZA(),p.qZA(),p.TgZ(26,"div",16),p.YNc(27,w,2,1,"ng-container",17),p.qZA(),p.TgZ(28,"ion-item",10),p.TgZ(29,"ion-input",18),p.NdJ("ionFocus",function(e){return t.inputFocus(e,"password")})("ionBlur",function(e){return t.inputBlur(e)}),p.qZA(),p.TgZ(30,"ion-button",19),p.NdJ("click",function(){return t.passwordShowToggle()}),p._UZ(31,"ion-icon",20),p.qZA(),p.qZA(),p.TgZ(32,"div",16),p.YNc(33,y,2,1,"ng-container",17),p.qZA(),p.qZA(),p.TgZ(34,"div",21),p.TgZ(35,"ion-button",22),p._uU(36," Register "),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(37,"ion-row"),p.TgZ(38,"div",23),p.NdJ("click",function(){return t.register()}),p.TgZ(39,"p"),p._uU(40,"Register"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&e&&(p.xp6(13),p.Q6J("formGroup",t.registerForm),p.xp6(1),p.Q6J("ngIf",!t.pictureDataURL),p.xp6(1),p.Q6J("ngIf",t.pictureDataURL),p.xp6(12),p.Q6J("ngForOf",t.validationMessasges.email),p.xp6(6),p.Q6J("ngForOf",t.validationMessasges.password),p.xp6(5),p.Q6J("ngClass",t.registerForm.valid?"footer-button ion-hide-lg-up":"footer-button-inactive ion-hide-lg-up"))},directives:[a.W2,a.jY,a.Nd,a.wI,a.YG,s._Y,s.JL,s.sg,i.O5,a.Ie,a.pK,a.j9,s.JJ,s.u,i.sg,s.wO,a.gu,i.mk],styles:[".page-sub-header[_ngcontent-%COMP%]{color:#fff;margin:1em 0;line-height:1.3em;text-align:center}#show-icon-button[_ngcontent-%COMP%]{position:absolute;right:24px;--background: none;box-shadow:none;font-size:18px;z-index:100}.error-message[_ngcontent-%COMP%]{color:#222;font-size:1.1em;font-weight:bold;margin-bottom:20px;padding:10px;background:rgba(222,222,222,.5);transition:.5s;z-index:999;opacity:0;border-top:3px solid red;-webkit-animation:slide-down .5s ease .5s forwards;animation:slide-down .5s ease .5s forwards}#default-profile-picture[_ngcontent-%COMP%]{margin:0 auto;display:block;border-radius:500px}#picture-input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:1}label[_ngcontent-%COMP%]{z-index:9999;cursor:pointer;width:250px;display:block;margin:1em auto;padding:.5em;text-align:center;background:#D0180194;color:#fff;border-color:#d01801;border-width:2px;border-style:solid;border-radius:5px;box-shadow:none}form[_ngcontent-%COMP%]{background:linear-gradient(118deg,#320534 1%,rgba(48,7,55,.5) 25%,#320534 50%,rgba(38,7,42,.5) 75%,#320534 100%);border-radius:5px;padding:.7em 1em 2em;box-shadow:1px 1px 40px #0000001f}.alert[_ngcontent-%COMP%]{background-color:#b9b9b961;border-left:solid 4px #3cf63c;margin:1em auto;padding:.9em;font-size:1em}.my-custom-class[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{background:#071f06}@media only screen and (max-width: 600px){form[_ngcontent-%COMP%]{padding:.3em}}ion-item.sc-ion-input-md-h[_ngcontent-%COMP%]:not(.item-label), ion-item[_ngcontent-%COMP%]:not(.item-label)   .sc-ion-input-md-h[_ngcontent-%COMP%]{--padding-start: 8px}.footer-button[_ngcontent-%COMP%]{transition:.5s;text-align:center;width:100%;background:#3cf63c;bottom:0px;opacity:1}.footer-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1b061c;font-size:1.5em}.footer-button-inactive[_ngcontent-%COMP%]{transition:.5s;text-align:center;width:100%;background:#999999;bottom:0px;opacity:.3}.footer-button-inactive[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1b061c;font-size:1.5em}"]}),Z)},{path:"success/:firstName/:picture",loadChildren:function(){return o.e(6741).then(o.bind(o,6741)).then(function(e){return e.SuccessPageModule})}}],k=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[u.Bz.forChild(C)],u.Bz]}),t}(),A=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[i.ez,s.u5,s.UX,a.Pc,k]]}),t}()}}])}();