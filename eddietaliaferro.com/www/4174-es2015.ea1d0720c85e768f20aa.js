"use strict";(self.webpackChunkeddietaliaferro_com=self.webpackChunkeddietaliaferro_com||[]).push([[4174],{4174:function(e,t,o){o.r(t),o.d(t,{RegisterPageModule:function(){return v}});var i=o(8583),r=o(665),n=o(7823),s=o(1382),a=o(4762),l=o(8307),c=o(5304),u=o(4575),d=o(8720),g=o(1228),p=o(1311);function m(e,t){1&e&&(d.TgZ(0,"ion-item",10),d._UZ(1,"img",24),d.qZA())}function h(e,t){if(1&e&&(d.TgZ(0,"ion-item",10),d._UZ(1,"img",25),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.s9C("src",e.pictureDataURL,d.LSH)}}function f(e,t){if(1&e&&(d.TgZ(0,"div",27),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.hij(" ",e.message," ")}}function b(e,t){if(1&e&&(d.ynx(0),d.YNc(1,f,2,1,"div",26),d.BQk()),2&e){const e=t.$implicit,o=d.oxw();d.xp6(1),d.Q6J("ngIf",o.registerForm.get("email").hasError(e.type)&&(o.registerForm.get("email").dirty||o.registerForm.get("email").touched))}}function w(e,t){if(1&e&&(d.TgZ(0,"div",27),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.hij(" ",e.message," ")}}function x(e,t){if(1&e&&(d.ynx(0),d.YNc(1,w,2,1,"div",26),d.BQk()),2&e){const e=d.oxw();d.xp6(1),d.Q6J("ngIf",e.registerForm.get("password").hasError("pattern")&&(e.registerForm.get("password").dirty||e.registerForm.get("password").touched))}}const y=[{path:"",component:(()=>{class e{constructor(e,t,o,i,r,n){this.router=e,this.auth=t,this.alertController=o,this.modalController=i,this.pictureService=r,this.formBuilder=n,this.passwordShow=!1,this.validCode=!1,this.code="",this.validationMessasges={email:[{type:"email",message:"Please enter a valid email address"}],password:[{type:"password",message:"Please enter a valid password that is at least 6 characters long"}]}}ngOnInit(){this.registerForm=this.formBuilder.group({firstName:["John",[r.kI.required]],lastName:["Doe",[r.kI.required]],email:["networkbiz92@gmail.com",[r.kI.required,r.kI.email]],password:["123456",[r.kI.required]]}),console.log(this.registerForm.valid)}back(){if(this.auth.blogID)return this.router.navigate(["login",this.auth.blogID]);this.router.navigate(["login",""])}register(){console.clear(),console.log("Registering User Data: "),console.log(this.registerForm.value),this.getPictureS3URL();let e=this.registerForm.value.firstName+" "+this.registerForm.value.lastName,t=this.registerForm.value.email,o=this.registerForm.value.picture,i=this.registerForm.value.password;this.emailCheckSub=this.auth.checkEmail(t).subscribe(r=>(console.log(r),r.isEmail?void this.presentAlert("Use different Email","There is a user that already exists with this email.\n"+t):this.codeAlert("6 Digit Code","An email has been sent to the email you provided with a 6 digit code. Please Enter the correct code to finish signing up.",e,o,t,i)))}passwordShowToggle(){let e=document.getElementById("password-input");return this.passwordShow?(e.setAttribute("type","password"),console.log(e),void(this.passwordShow=!1)):(e.setAttribute("type","text"),console.log(e),void(this.passwordShow=!0))}inputFocus(e,t){console.clear(),console.log(e),console.log(t);let o=document.getElementById("first-name-input"),i=document.getElementById("last-name-input"),r=document.getElementById("email-input"),n=document.getElementById("password-input");"firstName"===t&&(o.style.border="2px solid #3cf63c"),"lastName"===t&&(i.style.border="2px solid #3cf63c"),"email"===t&&(r.style.border="2px solid #3cf63c"),"password"===t&&(n.style.border="2px solid #3cf63c")}inputBlur(e){console.clear(),console.log(e);let t=document.getElementById("first-name-input"),o=document.getElementById("last-name-input"),i=document.getElementById("email-input"),r=document.getElementById("password-input");t.style.border="2px solid white",o.style.border="2px solid white",i.style.border="2px solid white",r.style.border="2px solid white"}getPictureFile(e){const t=document.getElementById("picture-input");let o=new FileReader;t&&o.readAsDataURL(e.target.files[0]),o.addEventListener("load",()=>{this.pictureDataURL=o.result,console.log(this.pictureDataURL)},!1)}getPictureS3URL(){if(this.pictureDataURL){const e=new FormData;let t=new File([this.dataURLtoBlob(this.pictureDataURL)],"user-profile-picture.png");e.append("user-profile-picture",t),this.pictureService.userProfilePictureUpload(e).subscribe(e=>{this.registerForm.value.picture=e.objectUrl})}else this.registerForm.value.picture="https://eddietaliaferro-com.s3.us-east-2.amazonaws.com/picture/001001635260303625_picture.png"}dataURLtoBlob(e){if(!e)return void(this.registerForm.value.picture="https://eddietaliaferro-com.s3.us-east-2.amazonaws.com/picture/001001635260303625_picture.png");const t=e.split(","),o=t[0].match(/:(.*?);/)[1],i=atob(t[1]);let r=i.length;const n=new Uint8Array(r);for(;r--;)n[r]=i.charCodeAt(r);return new Blob([n],{type:o})}noPictureAlert(){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"danger-alert",message:"Please upload a profile picture!",buttons:[{text:"OK"}]})).present()})}presentAlert(e,t){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"danger-alert",header:e,message:t,buttons:[{text:"OK"}]})).present()})}codeAlert(e,t,o,i,r,n){return(0,a.mG)(this,void 0,void 0,function*(){yield(yield this.alertController.create({cssClass:"danger-alert",header:e,message:t,buttons:[{text:"Submit",handler:()=>{console.log("Confirm Okay"),this.validCode&&(new Promise((e,t)=>{e(this.emailCheckSub.unsubscribe()),t(console.log("emialCheckSubPromise Rejected"))}),this.auth.register(o,i,r,n).pipe((0,l.b)(e=>{e||console.log("There was no response.")}),(0,c.K)(e=>{throw console.error(e),"The user already exists"===e.error.msg?this.presentAlert("Use different Email","There is a user that already exists with this email."):this.presentAlert("Server Error","There was an error with the server. Please come back later."),new Error(e)})).subscribe(e=>(console.log(e),this.presentSuccessModal())))}},{text:"Send New Code",handler:()=>{console.log("Confirm Okay")}},{text:"Cancel",role:"cancel"}],inputs:[{name:"code",id:"code",type:"text",placeholder:"Enter 6 Digit code"}]})).present().then(e=>{console.clear();let t,o=document.createElement("ion-input");o.setAttribute("id","ion-code"),o.setAttribute("type","text"),o.setAttribute("maxlength","6"),o.setAttribute("placeholder","Enter 6 Digit Code: "),console.log(o);let i=document.getElementById("code");var r;(r=i).parentNode.insertBefore(o,r.nextSibling),i.remove(),this.generateCode(6),this.codeSub=this.auth.sendRegistrationCode(this.registerForm.value.email,this.code).subscribe(e=>{console.log("Code Successfully sent"),o.addEventListener("ionChange",e=>{if(t=e.detail.value,console.log(t),t===this.code)return console.log("Congrats"),this.validCode=!0;t!=this.code&&console.log("Wrong Code")})})})})}generateCode(e){return(0,a.mG)(this,void 0,void 0,function*(){let t="";const o="0123456789",i=o.length;for(let r=0;r<e;r++)t+=o.charAt(Math.floor(Math.random()*i));return console.log("Generated Code: "+t),this.code=t})}presentSuccessModal(){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.modalController.create({component:u.l,componentProps:{firstName:this.registerForm.value.firstName,email:this.registerForm.value.email,picture:this.registerForm.value.picture,page:"register"},cssClass:"my-custom-class"});return yield e.present().catch(e=>{throw Error(e)}).then(()=>{this.router.navigate(["/login",this.auth.blogID]),setTimeout(()=>{e.dismiss()},5e3)})})}ngOnDestroy(){console.log("Register Page destroyed"),this.emailCheckSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(s.F0),d.Y36(g.e),d.Y36(n.Br),d.Y36(n.IN),d.Y36(p.G),d.Y36(r.qu))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-register"]],hostBindings:function(e,t){1&e&&d.NdJ("unloaded",function(){return t.ngOnDestroy()})},decls:41,vars:6,consts:[[1,"ion-justify-content-center",2,"margin-bottom","20px"],["size-xs","11","size-sm","9","size-md","8","size-lg","6","size-xl","5",1,"ion-text-center",2,"margin-top","5em"],[1,"grey-button",2,"width","100px",3,"click"],[1,"page-header",2,"margin-top","2em"],[1,"alert"],[2,"font-size","1em"],[1,"ion-justify-content-center",2,"margin-bottom","80px"],["size-xs","12","size-sm","9","size-md","8","size-lg","6","size-xl","5"],[3,"formGroup","ngSubmit"],["lines","none",4,"ngIf"],["lines","none"],["for","user-profile-picture"],["id","picture-input","name","user-profile-picture","type","file","placeholder","Picture",3,"change"],["id","first-name-input","formControlName","firstName","type","text","placeholder","First Name",3,"ionFocus","ionBlur"],["id","last-name-input","formControlName","lastName","type","text","placeholder","Last Name",3,"ionFocus","ionBlur"],["id","email-input","formControlName","email","type","email","placeholder","Email",3,"ionFocus","ionBlur"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["id","password-input","formControlName","password","type","password","placeholder","Password","minlength","6",3,"ionFocus","ionBlur"],["id","show-icon-button",3,"click"],["slot","end","name","eye"],[1,"ion-text-center"],["type","submit",1,"ion-hide-lg-down","green-button"],[3,"ngClass","click"],["id","default-profile-picture","height","120px","src","../../../assets/Default-Profile-Picture.svg","alt","Default Profile Picture"],["id","default-profile-picture","height","120px","alt","Uploaded Profile Picture",3,"src"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(e,t){1&e&&(d.TgZ(0,"ion-content"),d.TgZ(1,"ion-grid"),d.TgZ(2,"ion-row",0),d.TgZ(3,"ion-col",1),d.TgZ(4,"ion-button",2),d.NdJ("click",function(){return t.back()}),d._uU(5," Back "),d.qZA(),d.TgZ(6,"h1",3),d._uU(7,"Register"),d.qZA(),d.TgZ(8,"div",4),d.TgZ(9,"p",5),d._uU(10,"You will need to fill out the entire form to be able to register. You do not need a profile picture."),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"ion-row",6),d.TgZ(12,"ion-col",7),d.TgZ(13,"form",8),d.NdJ("ngSubmit",function(){return t.register()}),d.YNc(14,m,2,0,"ion-item",9),d.YNc(15,h,2,1,"ion-item",9),d.TgZ(16,"ion-item",10),d.TgZ(17,"label",11),d._uU(18,"Profile Picture"),d.qZA(),d.TgZ(19,"input",12),d.NdJ("change",function(e){return t.getPictureFile(e)}),d.qZA(),d.qZA(),d.TgZ(20,"ion-item",10),d.TgZ(21,"ion-input",13),d.NdJ("ionFocus",function(e){return t.inputFocus(e,"firstName")})("ionBlur",function(e){return t.inputBlur(e)}),d.qZA(),d.qZA(),d.TgZ(22,"ion-item",10),d.TgZ(23,"ion-input",14),d.NdJ("ionFocus",function(e){return t.inputFocus(e,"lastName")})("ionBlur",function(e){return t.inputBlur(e)}),d.qZA(),d.qZA(),d.TgZ(24,"ion-item",10),d.TgZ(25,"ion-input",15),d.NdJ("ionFocus",function(e){return t.inputFocus(e,"email")})("ionBlur",function(e){return t.inputBlur(e)}),d.qZA(),d.qZA(),d.TgZ(26,"div",16),d.YNc(27,b,2,1,"ng-container",17),d.qZA(),d.TgZ(28,"ion-item",10),d.TgZ(29,"ion-input",18),d.NdJ("ionFocus",function(e){return t.inputFocus(e,"password")})("ionBlur",function(e){return t.inputBlur(e)}),d.qZA(),d.TgZ(30,"ion-button",19),d.NdJ("click",function(){return t.passwordShowToggle()}),d._UZ(31,"ion-icon",20),d.qZA(),d.qZA(),d.TgZ(32,"div",16),d.YNc(33,x,2,1,"ng-container",17),d.qZA(),d.qZA(),d.TgZ(34,"div",21),d.TgZ(35,"ion-button",22),d._uU(36," Register "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(37,"ion-row"),d.TgZ(38,"div",23),d.NdJ("click",function(){return t.register()}),d.TgZ(39,"p"),d._uU(40,"Register"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&e&&(d.xp6(13),d.Q6J("formGroup",t.registerForm),d.xp6(1),d.Q6J("ngIf",!t.pictureDataURL),d.xp6(1),d.Q6J("ngIf",t.pictureDataURL),d.xp6(12),d.Q6J("ngForOf",t.validationMessasges.email),d.xp6(6),d.Q6J("ngForOf",t.validationMessasges.password),d.xp6(5),d.Q6J("ngClass",t.registerForm.valid?"footer-button ion-hide-lg-up":"footer-button-inactive ion-hide-lg-up"))},directives:[n.W2,n.jY,n.Nd,n.wI,n.YG,r._Y,r.JL,r.sg,i.O5,n.Ie,n.pK,n.j9,r.JJ,r.u,i.sg,r.wO,n.gu,i.mk],styles:[".page-sub-header[_ngcontent-%COMP%]{color:#fff;margin:1em 0;line-height:1.3em;text-align:center}#show-icon-button[_ngcontent-%COMP%]{position:absolute;right:24px;--background: none;box-shadow:none;font-size:18px;z-index:100}.error-message[_ngcontent-%COMP%]{color:#222;font-size:1.1em;font-weight:bold;margin-bottom:20px;padding:10px;background:rgba(222,222,222,.5);transition:.5s;z-index:999;opacity:0;border-top:3px solid red;-webkit-animation:slide-down .5s ease .5s forwards;animation:slide-down .5s ease .5s forwards}#default-profile-picture[_ngcontent-%COMP%]{margin:0 auto;display:block;border-radius:500px}#picture-input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:1}label[_ngcontent-%COMP%]{z-index:9999;cursor:pointer;width:250px;display:block;margin:1em auto;padding:.5em;text-align:center;background:#D0180194;color:#fff;border-color:#d01801;border-width:2px;border-style:solid;border-radius:5px;box-shadow:none}form[_ngcontent-%COMP%]{background:linear-gradient(118deg,#320534 1%,rgba(48,7,55,.5) 25%,#320534 50%,rgba(38,7,42,.5) 75%,#320534 100%);border-radius:5px;padding:.7em 1em 2em;box-shadow:1px 1px 40px #0000001f}.alert[_ngcontent-%COMP%]{background-color:#b9b9b961;border-left:solid 4px #3cf63c;margin:1em auto;padding:.9em;font-size:1em}.my-custom-class[_ngcontent-%COMP%]   .modal-wrapper[_ngcontent-%COMP%]{background:#071f06}@media only screen and (max-width: 600px){form[_ngcontent-%COMP%]{padding:.3em}}ion-item.sc-ion-input-md-h[_ngcontent-%COMP%]:not(.item-label), ion-item[_ngcontent-%COMP%]:not(.item-label)   .sc-ion-input-md-h[_ngcontent-%COMP%]{--padding-start: 8px}.footer-button[_ngcontent-%COMP%]{transition:.5s;text-align:center;width:100%;background:#3cf63c;bottom:0px;opacity:1}.footer-button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1b061c;font-size:1.5em}.footer-button-inactive[_ngcontent-%COMP%]{transition:.5s;text-align:center;width:100%;background:#999999;bottom:0px;opacity:.3}.footer-button-inactive[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#1b061c;font-size:1.5em}"]}),e})()},{path:"success/:firstName/:picture",loadChildren:()=>o.e(6741).then(o.bind(o,6741)).then(e=>e.SuccessPageModule)}];let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[s.Bz.forChild(y)],s.Bz]}),e})(),v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.oAB({type:e}),e.\u0275inj=d.cJS({imports:[[i.ez,r.u5,r.UX,n.Pc,Z]]}),e})()}}]);