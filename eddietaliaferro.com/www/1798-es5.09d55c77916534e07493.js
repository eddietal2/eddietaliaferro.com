!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(self.webpackChunkeddietaliaferro_com=self.webpackChunkeddietaliaferro_com||[]).push([[1798],{1798:function(n,r,o){o.r(r),o.d(r,{AddProjectsPageModule:function(){return k}});var i=o(8583),a=o(665),s=o(7823),c=o(1382),u=o(4762),l=o(5304),d=o(5917),m=o(8720),p=o(4439),g=o(6862),h=o(1311);function f(e,t){if(1&e&&m._UZ(0,"img",14),2&e){var n=m.oxw();m.s9C("src",n.thumbnailDataURL,m.LSH)}}var b,v=[{path:"",component:(b=function(){function n(t,r,o,i,a,s){e(this,n),this.router=t,this.formBuilder=r,this.toastController=o,this.projectService=i,this.adminProjectEmitterService=a,this.picturesService=s}var r,o,i;return r=n,(o=[{key:"ngOnInit",value:function(){this.addProjectForm=this.formBuilder.group({title:["",[a.kI.required]],thumbnail:["",[a.kI.required]],url:["",a.kI.required],description:["",a.kI.required]})}},{key:"back",value:function(){this.router.navigateByUrl("/admin/projects")}},{key:"getThumbnailFile",value:function(e){var t=this,n=document.getElementById("thumbnail"),r=new FileReader;n&&r.readAsDataURL(e.target.files[0]),r.addEventListener("load",function(){t.thumbnailDataURL=r.result,console.log(t.thumbnailDataURL)},!1)}},{key:"dataURLtoBlob",value:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),o=r.length,i=new Uint8Array(o);o--;)i[o]=r.charCodeAt(o);return new Blob([i],{type:n})}},{key:"notTitleToast",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"There was no Title",cssClass:"danger-toast",position:"top",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"notThumbnailToast",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"There was no Thumbnail",cssClass:"danger-toast",position:"top",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"errorToast",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"There was an Error",cssClass:"danger-toast",position:"top",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"noProjectLinkToast",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"There was no Blog Toast",cssClass:"danger-toast",position:"top",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"noProjectDescriptionToast",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"There was no Blog Toast",cssClass:"danger-toast",position:"top",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"successfullProjectSubmit",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({message:"Successfully added Blog!",cssClass:"success-toast",position:"top",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}},e,this)}))}},{key:"submitProject",value:function(){var e=this;console.log("Getting Thumbnail S3 URL");var t=new FormData,n=new File([this.dataURLtoBlob(this.thumbnailDataURL)],"thumbnail.png");t.append("project-thumbnail",n),this.picturesService.projectThumbnailUpload(t).subscribe(function(t){if(e.addProjectForm.value.thumbnail=t.objectUrl,!e.addProjectForm.value.title)return console.log("There was no Title"),e.notTitleToast();if(!e.addProjectForm.value.thumbnail)return console.log("There was no Thumbnail"),e.notThumbnailToast();if(!e.addProjectForm.value.description)return console.log("There was no Project Description"),e.noProjectDescriptionToast();if(!e.addProjectForm.value.url)return console.log("There was no Project Link"),e.noProjectLinkToast();var n={title:e.addProjectForm.value.title,thumbnail:e.addProjectForm.value.thumbnail,url:e.addProjectForm.value.url,visible:!1,description:e.addProjectForm.value.description};console.log(n),e.projectService.submitProject(n).pipe((0,l.K)(function(t){throw e.errorToast(),(0,d.of)("I caught: ".concat(t.error)),Error(t)})).subscribe(function(t){return(0,u.mG)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,this.adminProjectEmitterService.resetAdminProjects();case 3:return e.next=5,this.successfullProjectSubmit();case 5:return e.next=7,this.router.navigateByUrl("admin/projects");case 7:case"end":return e.stop()}},e,this)}))})})}},{key:"ngOnDestroy",value:function(){console.log("Add Project Page destroyed")}}])&&t(r.prototype,o),i&&t(r,i),n}(),b.\u0275fac=function(e){return new(e||b)(m.Y36(c.F0),m.Y36(a.qu),m.Y36(s.yF),m.Y36(p.Y),m.Y36(g.k),m.Y36(h.G))},b.\u0275cmp=m.Xpm({type:b,selectors:[["app-add-projects"]],hostBindings:function(e,t){1&e&&m.NdJ("unloaded",function(){return t.ngOnDestroy()})},decls:28,vars:3,consts:[[2,"height","50px"],[1,"ion-justify-content-center"],["id","header-button","size-lg","8"],["slot","end"],[1,"purple-button",2,"--border-radius","50px",3,"click"],["size-lg","8"],[3,"formGroup","ngSubmit"],[2,"margin-top","0em"],["placeholder","Title","formControlName","title","type","text"],["placeholder","Link URL","formControlName","url","type","text"],["id","thumbnail","placeholder","Thumbnail","formControlName","thumbnail","type","file",3,"change"],["height","200","class","picture-preview","alt","Project Thumbnail",3,"src",4,"ngIf"],["rows","10","placeholder","Description of project","formControlName","description"],["type","submit",1,"green-button",2,"margin","5em auto 10em auto",3,"disabled"],["height","200","alt","Project Thumbnail",1,"picture-preview",3,"src"]],template:function(e,t){1&e&&(m.TgZ(0,"ion-content"),m.TgZ(1,"ion-grid"),m._UZ(2,"ion-row",0),m.TgZ(3,"ion-row",1),m.TgZ(4,"ion-col",2),m.TgZ(5,"ion-toolbar"),m.TgZ(6,"ion-title"),m._uU(7,"Add Project"),m.qZA(),m.TgZ(8,"ion-buttons",3),m.TgZ(9,"ion-button",4),m.NdJ("click",function(){return t.back()}),m._uU(10," Back "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(11,"ion-col",5),m.TgZ(12,"form",6),m.NdJ("ngSubmit",function(){return t.submitProject()}),m.TgZ(13,"h4",7),m._uU(14,"Title"),m.qZA(),m._UZ(15,"ion-input",8),m.TgZ(16,"h4"),m._uU(17,"Link"),m.qZA(),m._UZ(18,"ion-input",9),m.TgZ(19,"h4"),m._uU(20,"Thumbnail"),m.qZA(),m.TgZ(21,"input",10),m.NdJ("change",function(e){return t.getThumbnailFile(e)}),m.qZA(),m.YNc(22,f,1,1,"img",11),m.TgZ(23,"h4"),m._uU(24,"Description"),m.qZA(),m._UZ(25,"ion-textarea",12),m.TgZ(26,"ion-button",13),m._uU(27," Submit "),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(12),m.Q6J("formGroup",t.addProjectForm),m.xp6(10),m.Q6J("ngIf",t.thumbnailDataURL),m.xp6(4),m.Q6J("disabled",t.addProjectForm.invalid))},directives:[s.W2,s.jY,s.Nd,s.wI,s.sr,s.wd,s.Sm,s.YG,a._Y,a.JL,a.sg,s.pK,s.j9,a.JJ,a.u,a.Fj,i.O5,s.g2],styles:["ion-grid[_ngcontent-%COMP%]{background-image:url(Matrix-Background.4d89e68e49e74a3df462.svg);background-attachment:fixed;background-size:cover;--color: white;height:auto}@media only screen and (max-width: 600px){ion-grid[_ngcontent-%COMP%]{background-image:url(Matrix-Background-Mobile.40092d82ecc24a826f9a.svg);background-size:cover;background-repeat:no-repeat}}form[_ngcontent-%COMP%]{padding:1em}ion-toolbar[_ngcontent-%COMP%]{margin-bottom:2.5em;--background: none;border-bottom:1px solid #333}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{position:relative;left:-20px}.purple-button[_ngcontent-%COMP%]{width:150px;display:block;margin:30px 0;--background: linear-gradient(360deg, #BC3790 -2%, #87005a, #BC3790);--color: white;--border-radius: 50px;--box-shadow: none}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{background:#fff;--color: #333;--placeholder-color: #333;margin:1em 0;border-radius:5px;box-shadow:1px 1px 10px #333}ion-input[_ngcontent-%COMP%]{--padding-start: .5em;height:50px}h4[_ngcontent-%COMP%]{margin-top:3.5em;color:#d8cca8}.green-button[_ngcontent-%COMP%]{margin-top:3em;margin-bottom:10em}"]}),b)}],T=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[c.Bz.forChild(v)],c.Bz]}),t}(),k=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[i.ez,a.u5,a.UX,s.Pc,T]]}),t}()}}])}();