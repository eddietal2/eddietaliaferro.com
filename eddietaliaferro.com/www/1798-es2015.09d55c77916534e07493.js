"use strict";(self.webpackChunkeddietaliaferro_com=self.webpackChunkeddietaliaferro_com||[]).push([[1798],{1798:function(t,e,o){o.r(e),o.d(e,{AddProjectsPageModule:function(){return f}});var n=o(8583),r=o(665),i=o(7823),a=o(1382),s=o(4762),c=o(5304),l=o(5917),u=o(8720),d=o(4439),m=o(6862),h=o(1311);function g(t,e){if(1&t&&u._UZ(0,"img",14),2&t){const t=u.oxw();u.s9C("src",t.thumbnailDataURL,u.LSH)}}const p=[{path:"",component:(()=>{class t{constructor(t,e,o,n,r,i){this.router=t,this.formBuilder=e,this.toastController=o,this.projectService=n,this.adminProjectEmitterService=r,this.picturesService=i}ngOnInit(){this.addProjectForm=this.formBuilder.group({title:["",[r.kI.required]],thumbnail:["",[r.kI.required]],url:["",r.kI.required],description:["",r.kI.required]})}back(){this.router.navigateByUrl("/admin/projects")}getThumbnailFile(t){const e=document.getElementById("thumbnail");let o=new FileReader;e&&o.readAsDataURL(t.target.files[0]),o.addEventListener("load",()=>{this.thumbnailDataURL=o.result,console.log(this.thumbnailDataURL)},!1)}dataURLtoBlob(t){const e=t.split(","),o=e[0].match(/:(.*?);/)[1],n=atob(e[1]);let r=n.length;const i=new Uint8Array(r);for(;r--;)i[r]=n.charCodeAt(r);return new Blob([i],{type:o})}notTitleToast(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"There was no Title",cssClass:"danger-toast",position:"top",duration:2e3})).present()})}notThumbnailToast(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"There was no Thumbnail",cssClass:"danger-toast",position:"top",duration:2e3})).present()})}errorToast(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"There was an Error",cssClass:"danger-toast",position:"top",duration:2e3})).present()})}noProjectLinkToast(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"There was no Blog Toast",cssClass:"danger-toast",position:"top",duration:2e3})).present()})}noProjectDescriptionToast(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"There was no Blog Toast",cssClass:"danger-toast",position:"top",duration:2e3})).present()})}successfullProjectSubmit(){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:"Successfully added Blog!",cssClass:"success-toast",position:"top",duration:2e3})).present()})}submitProject(){console.log("Getting Thumbnail S3 URL");const t=new FormData;let e=new File([this.dataURLtoBlob(this.thumbnailDataURL)],"thumbnail.png");t.append("project-thumbnail",e),this.picturesService.projectThumbnailUpload(t).subscribe(t=>{if(this.addProjectForm.value.thumbnail=t.objectUrl,!this.addProjectForm.value.title)return console.log("There was no Title"),this.notTitleToast();if(!this.addProjectForm.value.thumbnail)return console.log("There was no Thumbnail"),this.notThumbnailToast();if(!this.addProjectForm.value.description)return console.log("There was no Project Description"),this.noProjectDescriptionToast();if(!this.addProjectForm.value.url)return console.log("There was no Project Link"),this.noProjectLinkToast();let e={title:this.addProjectForm.value.title,thumbnail:this.addProjectForm.value.thumbnail,url:this.addProjectForm.value.url,visible:!1,description:this.addProjectForm.value.description};console.log(e),this.projectService.submitProject(e).pipe((0,c.K)(t=>{throw this.errorToast(),(0,l.of)(`I caught: ${t.error}`),Error(t)})).subscribe(t=>(0,s.mG)(this,void 0,void 0,function*(){console.log(t),yield this.adminProjectEmitterService.resetAdminProjects(),yield this.successfullProjectSubmit(),yield this.router.navigateByUrl("admin/projects")}))})}ngOnDestroy(){console.log("Add Project Page destroyed")}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(a.F0),u.Y36(r.qu),u.Y36(i.yF),u.Y36(d.Y),u.Y36(m.k),u.Y36(h.G))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-add-projects"]],hostBindings:function(t,e){1&t&&u.NdJ("unloaded",function(){return e.ngOnDestroy()})},decls:28,vars:3,consts:[[2,"height","50px"],[1,"ion-justify-content-center"],["id","header-button","size-lg","8"],["slot","end"],[1,"purple-button",2,"--border-radius","50px",3,"click"],["size-lg","8"],[3,"formGroup","ngSubmit"],[2,"margin-top","0em"],["placeholder","Title","formControlName","title","type","text"],["placeholder","Link URL","formControlName","url","type","text"],["id","thumbnail","placeholder","Thumbnail","formControlName","thumbnail","type","file",3,"change"],["height","200","class","picture-preview","alt","Project Thumbnail",3,"src",4,"ngIf"],["rows","10","placeholder","Description of project","formControlName","description"],["type","submit",1,"green-button",2,"margin","5em auto 10em auto",3,"disabled"],["height","200","alt","Project Thumbnail",1,"picture-preview",3,"src"]],template:function(t,e){1&t&&(u.TgZ(0,"ion-content"),u.TgZ(1,"ion-grid"),u._UZ(2,"ion-row",0),u.TgZ(3,"ion-row",1),u.TgZ(4,"ion-col",2),u.TgZ(5,"ion-toolbar"),u.TgZ(6,"ion-title"),u._uU(7,"Add Project"),u.qZA(),u.TgZ(8,"ion-buttons",3),u.TgZ(9,"ion-button",4),u.NdJ("click",function(){return e.back()}),u._uU(10," Back "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(11,"ion-col",5),u.TgZ(12,"form",6),u.NdJ("ngSubmit",function(){return e.submitProject()}),u.TgZ(13,"h4",7),u._uU(14,"Title"),u.qZA(),u._UZ(15,"ion-input",8),u.TgZ(16,"h4"),u._uU(17,"Link"),u.qZA(),u._UZ(18,"ion-input",9),u.TgZ(19,"h4"),u._uU(20,"Thumbnail"),u.qZA(),u.TgZ(21,"input",10),u.NdJ("change",function(t){return e.getThumbnailFile(t)}),u.qZA(),u.YNc(22,g,1,1,"img",11),u.TgZ(23,"h4"),u._uU(24,"Description"),u.qZA(),u._UZ(25,"ion-textarea",12),u.TgZ(26,"ion-button",13),u._uU(27," Submit "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(12),u.Q6J("formGroup",e.addProjectForm),u.xp6(10),u.Q6J("ngIf",e.thumbnailDataURL),u.xp6(4),u.Q6J("disabled",e.addProjectForm.invalid))},directives:[i.W2,i.jY,i.Nd,i.wI,i.sr,i.wd,i.Sm,i.YG,r._Y,r.JL,r.sg,i.pK,i.j9,r.JJ,r.u,r.Fj,n.O5,i.g2],styles:["ion-grid[_ngcontent-%COMP%]{background-image:url(Matrix-Background.4d89e68e49e74a3df462.svg);background-attachment:fixed;background-size:cover;--color: white;height:auto}@media only screen and (max-width: 600px){ion-grid[_ngcontent-%COMP%]{background-image:url(Matrix-Background-Mobile.40092d82ecc24a826f9a.svg);background-size:cover;background-repeat:no-repeat}}form[_ngcontent-%COMP%]{padding:1em}ion-toolbar[_ngcontent-%COMP%]{margin-bottom:2.5em;--background: none;border-bottom:1px solid #333}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{position:relative;left:-20px}.purple-button[_ngcontent-%COMP%]{width:150px;display:block;margin:30px 0;--background: linear-gradient(360deg, #BC3790 -2%, #87005a, #BC3790);--color: white;--border-radius: 50px;--box-shadow: none}ion-input[_ngcontent-%COMP%], ion-textarea[_ngcontent-%COMP%]{background:#fff;--color: #333;--placeholder-color: #333;margin:1em 0;border-radius:5px;box-shadow:1px 1px 10px #333}ion-input[_ngcontent-%COMP%]{--padding-start: .5em;height:50px}h4[_ngcontent-%COMP%]{margin-top:3.5em;color:#d8cca8}.green-button[_ngcontent-%COMP%]{margin-top:3em;margin-bottom:10em}"]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[a.Bz.forChild(p)],a.Bz]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[n.ez,r.u5,r.UX,i.Pc,b]]}),t})()}}]);